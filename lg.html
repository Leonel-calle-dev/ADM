<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login - Sistema UAP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome para iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background: linear-gradient(135deg, rgba(0,0,0,0.75), rgba(0,0,0,0.85)),
                  url("https://lh3.googleusercontent.com/fife/ALs6j_HMdLowsBDyMH08lSYMP526rzMIMN9wt7jXZZFf8jM6CZZH1ivkEyLEyCmVha1VedXa8c75Sk3RqnW-6Sm-IBSwEOtoJQvc7Esu-RzT0LJ3FuXPBkivVzwM9Q2748XvBIw8aanjN6fyfQeGFhRXoLuZOwf0tpSaOYCECdmCfEk2a6R4-802OCn4S7i1YMb5hM-qd9UdOu47PFFPL06yinWib4KhsmNfD_W7TFo83U_OGEuJZzPbcT7LkKZXC3b_2VgEMe2JS6o7kcb2ry6oRIbOWzqOlFjk61Tlmd-32jBuQWZrn6sy_UJ0a69eYe9uibqkE6pmW9PHP3Gi0BHBTPnvO92uOBJVCWXHOBIegNzBA2uGcx_m-xmDwX4XMuxFK2cqRx3X2vt1E8ElJ4RlFPczag8nWfdC6PtqPJEQU2l7rymXzhiIaE98Q6lyDwzmZIROcddNduoQAljarqmhC_tDzGdFLQATfwVtwFoP1lsJTz_02g2LX8nCAum9oPnR1E_Z5eDu90XBnq_-bvu3dozD7ohKBenK_bmPqCLcbfVkr4TWbg65jy2smsQ6cxqg0lIIFAAwqvU0SZLA0U-hNIE7QGKkwsTLWRvBIXjH4PnGViJf0JokDgRQ3t5FNf7jo3XtbhIXUMGdLOEHmjSqxk_DXinm71dTQH2IdEIkVX_uLFuQJ0h7IamAYO1AE6gcJSbJO08b0sDeAzLIILseimolgNrLHJGmCy3O3SzsolvitUkL8vrYmSRCHRSBZyntsqnhg5VO4DBwc8oBJYUtz2deMX53XJ43Uiui2E4E5V9A8UqL6raacHQfQqbDzVnmOymYwjy6UEmOHNyshpRuFHoQSmTPoDC-OlPvIRF3OUIhnpyaP628spE74uE5inv689gT8ZWIHhRi2Jdj_JJmCcA3e5Xs1ODHF0OHaj7gy4znKZbz-XL6xeR4mETQe8BHzf2GHQDbgDIgieT84MlYNEP_OpzGaKmrL3fpNpDqGQ6IOe4OFzy3uf8d-chcRjr--8Fb9IueJaEzlmJFbor54oJNATKK9J6K6MI2WPmzh48-pfsWLhKNfffOwyFpi6EzUTCE5WTHLGNiYj_aHh3pyN4_KDZlBe8kBsfKwiYyBYwHl_9-B25vDZgZ50kzyNPe9JVpkxW2FphapRaFucNkbfJXsxTXfIS-cuCU-3K_kcuNw0iEAA9HDy6vSAiXHGSX5KWFhpaGwtAoAbmZDf9Hp99elOQ2y3r2bf9lE56OPPvtyK5gvQHRB8U89QxR50DL-9nvYKxUV-3am5qYND1_LXrklWT5fxM9DNIUCbDTjTcl4wMtiRWNmdHTlEW8cspHMrnwmLLLTuEaOgFSDU95aqhUJczV0cnZIhfZ1qM6Ag-FYWOp79RUG9d4lXPWATmtD1G5uIgLqxO8m-3ggULYa3ul9iJ0G2HgDbTR0lAu0m8c1uN-GHCpn1cpwcGPh7e5lf-K9VUBRCEG7Fy1NxEgyuDO4FQZhhxEK3fB5KoEiA2vwN3JaKyfgb7jjaaV_P7nAk_x1f95XwKIjm0zAct0j69srXvRFPhmKjEpTgIEOEs-AydSuz8nkzjJdGTkLznFA_0Lb67owlRMIyZYen5-sBMOkiJd1VVwdURGXbNSmYsA3QbAWF4UqRXHEbno1TgH9eGG8AXXHqsIsY0GWNyj5LAMwDBIa6bRLXjSbKM4T13rmEBG8YWvipHmBEZGbhWV3BvP2ho_m_dYBrw07YU=w1910-h922?auditContext=prefetch") no-repeat center center/cover;
      background-attachment: fixed;
      color: #fff;
    }

    .main-content {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .login-container {
      background: rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(12px);
      padding: 45px 40px;
      border-radius: 24px;
      width: 100%;
      max-width: 420px;
      text-align: center;
      box-shadow: 0 10px 35px rgba(0, 0, 0, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.18);
      animation: fadeIn 0.8s ease-out;
      margin: 20px auto;
      position: relative;
      overflow: hidden;
    }
    
    .login-container::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(0, 119, 255, 0.15) 0%, rgba(0, 225, 255, 0.08) 35%, transparent 70%);
      z-index: -1;
      animation: rotate 15s linear infinite;
    }
    
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .login-container img {
      width: 130px;
      max-width: 100%;
      height: auto;
      margin-bottom: 18px;
      animation: bounce 2s infinite;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .login-container h2 {
      color: #fff;
      margin-bottom: 28px;
      font-weight: 700;
      font-size: 2.1rem;
      letter-spacing: -0.5px;
      position: relative;
      display: inline-block;
    }
    
    .login-container h2::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 3px;
      background: linear-gradient(90deg, transparent, #00e1ff, transparent);
      border-radius: 3px;
    }

    .input-field {
      margin-bottom: 22px;
      position: relative;
    }
    
    .input-field i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.65);
      font-size: 18px;
      z-index: 2;
    }

    .input-field input {
      width: 100%;
      padding: 16px 15px 16px 48px;
      border: none;
      border-radius: 14px;
      outline: none;
      font-size: 16px;
      transition: all 0.35s ease;
      background: rgba(255, 255, 255, 0.92);
      color: #2c3e50;
      font-weight: 500;
      letter-spacing: 0.5px;
    }
    
    .input-field input::placeholder {
      color: #7f8c8d;
      font-weight: 400;
      opacity: 1;
    }

    .input-field input:focus {
      box-shadow: 0 0 0 3px rgba(0, 225, 255, 0.35), 0 0 12px rgba(0, 225, 255, 0.25);
      background: rgba(255, 255, 255, 1);
      transform: translateY(-1px);
    }
    
    .toggle-password {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.7);
      cursor: pointer;
      font-size: 18px;
      padding: 5px;
      z-index: 3;
      transition: all 0.3s ease;
    }
    
    .toggle-password:hover {
      color: #00e1ff;
      transform: translateY(-50%) scale(1.15);
    }

    .options-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .remember-me {
      display: flex;
      align-items: center;
      color: rgba(255, 255, 255, 0.85);
      font-size: 14px;
      cursor: pointer;
    }
    
    .remember-me input {
      margin-right: 8px;
      width: 16px;
      height: 16px;
      cursor: pointer;
    }
    
    .forgot-password {
      color: rgba(255, 255, 255, 0.85);
      font-size: 14px;
      text-decoration: none;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .forgot-password:hover {
      color: #00e1ff;
      text-decoration: underline;
    }

    button {
      width: 100%;
      padding: 16px;
      background: linear-gradient(90deg, #0077ff, #00c6ff, #00e1ff);
      border: none;
      border-radius: 14px;
      color: white;
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.35s ease;
      margin-top: 8px;
      box-shadow: 0 6px 20px rgba(0, 100, 255, 0.4);
      position: relative;
      overflow: hidden;
      letter-spacing: 0.5px;
    }
    
    button::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(rgba(255,255,255,0.2), transparent, rgba(255,255,255,0.3));
      transform: rotate(30deg);
      transition: all 0.6s;
      opacity: 0;
    }
    
    button:hover::after {
      opacity: 1;
      left: 120%;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 119, 255, 0.55), 0 0 15px rgba(0, 225, 255, 0.4);
      background: linear-gradient(90deg, #0066e0, #00b3e6, #00ccff);
    }

    button:active {
      transform: translateY(1px);
      box-shadow: 0 4px 15px rgba(0, 100, 255, 0.4);
    }
    
    button:disabled {
      background: linear-gradient(90deg, #5a98ff, #7eb3ff);
      cursor: not-allowed;
      transform: none;
      box-shadow: 0 4px 12px rgba(0, 80, 200, 0.3);
    }

    .divider {
      display: flex;
      align-items: center;
      text-align: center;
      margin: 25px 0 20px;
      color: rgba(255, 255, 255, 0.7);
      font-size: 14px;
      position: relative;
    }
    
    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      border-bottom: 1px solid rgba(255, 255, 255, 0.25);
    }
    
    .divider::before {
      margin-right: 15px;
    }
    
    .divider::after {
      margin-left: 15px;
    }

    .demo-credentials {
      background: rgba(0, 30, 60, 0.75);
      border-radius: 16px;
      padding: 18px;
      margin-top: 15px;
      border: 1px solid rgba(0, 150, 255, 0.3);
      text-align: left;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .demo-credentials h3 {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      color: #00e1ff;
      font-size: 16px;
      font-weight: 600;
    }
    
    .demo-credentials h3 i {
      margin-right: 8px;
      font-size: 18px;
    }
    
    .demo-credentials p {
      margin-bottom: 5px;
      display: flex;
      justify-content: space-between;
    }
    
    .demo-credentials span {
      background: rgba(0, 100, 200, 0.3);
      padding: 2px 8px;
      border-radius: 6px;
      font-weight: 500;
      letter-spacing: 0.5px;
      margin-left: 5px;
    }

    /* Footer */
    .footer {
      background: rgba(0, 15, 35, 0.85);
      backdrop-filter: blur(10px);
      padding: 22px 0;
      text-align: center;
      margin-top: auto;
      border-top: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.25);
    }

    .footer-text {
      color: rgba(255, 255, 255, 0.75);
      font-size: 15px;
      font-weight: 400;
      letter-spacing: 0.5px;
    }
    
    .footer-text strong {
      color: #00e1ff;
      font-weight: 600;
    }

    @keyframes fadeIn {
      from { 
        opacity: 0; 
        transform: translateY(25px);
        filter: blur(5px);
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
        filter: blur(0);
      }
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0, 225, 255, 0.4); }
      70% { box-shadow: 0 0 0 12px rgba(0, 225, 255, 0); }
      100% { box-shadow: 0 0 0 0 rgba(0, 225, 255, 0); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .login-container {
        padding: 35px 30px;
        margin: 15px;
        border-radius: 20px;
      }

      .login-container h2 {
        font-size: 1.8rem;
        margin-bottom: 22px;
      }

      .login-container img {
        width: 110px;
        margin-bottom: 15px;
      }

      .input-field input {
        padding: 15px 15px 15px 45px;
        font-size: 16px;
      }
      
      .options-container {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }

      button {
        padding: 15px;
        font-size: 16px;
      }

      .footer {
        padding: 18px 0;
      }

      .footer-text {
        font-size: 14px;
        padding: 0 15px;
      }
      
      .demo-credentials {
        padding: 15px;
        font-size: 13.5px;
      }
    }

    @media (max-width: 480px) {
      .main-content {
        padding: 10px;
      }

      .login-container {
        padding: 30px 25px;
        margin: 10px;
        border-radius: 18px;
      }

      .login-container h2 {
        font-size: 1.65rem;
      }

      .login-container img {
        width: 95px;
      }

      .input-field {
        margin-bottom: 18px;
      }

      .input-field input {
        padding: 14px 15px 14px 42px;
        font-size: 15.5px;
      }
      
      .toggle-password {
        font-size: 17px;
      }
      
      button {
        padding: 14px;
        font-size: 16px;
      }
      
      .demo-credentials {
        padding: 12px;
        font-size: 13px;
      }
      
      .demo-credentials p {
        flex-wrap: wrap;
      }
    }

    @media (max-width: 360px) {
      .login-container {
        padding: 25px 20px;
      }

      .login-container h2 {
        font-size: 1.55rem;
      }
      
      .input-field input {
        padding: 13px 15px 13px 40px;
        font-size: 15px;
      }
      
      .options-container {
        font-size: 13px;
      }
      
      .footer-text {
        font-size: 13px;
        line-height: 1.5;
      }
    }

    /* Animación para el botón de login exitoso */
    .login-success {
      animation: pulse 1.5s infinite;
    }
    
    /* Estilo para inputs con error */
    .input-error {
      animation: shake 0.5s;
      box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.4) !important;
    }
    
    @keyframes shake {
      0%, 100% {transform: translateX(0);}
      20%, 60% {transform: translateX(-5px);}
      40%, 80% {transform: translateX(5px);}
    }
    
    /* Estilo para el loader */
    .loader {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .btn-loading {
      position: relative;
      padding-left: 45px !important;
    }
    
    .btn-loading::after {
      content: '';
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      border: 2.5px solid rgba(255, 255, 255, 0.4);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
    }
  </style>
</head>
<body>
  <div class="main-content">
    <div class="login-container">
      <img src="https://lh3.googleusercontent.com/fife/ALs6j_G2PUe0Mfr2fWt-nMSpt9Z-tDjXQQc8UI2grsBRqmIIHBnSTuhXsT43xM11ANSHIARGJXzCxA7woBJz7VAY4Kxb7Dozqrj4Ifu5l0tUk0z2Fe2u5FihqlRQtu7Iezlq45yp4s5gJVcSYUFYu2F0kwfy18qE0mc1kFu42kurl8o2C0XmeXOK5ZE47DSnCENoL6_UZLA31QFkhRyzhp2yO4fuKUQPvKbHiGnwUJEPN8vKm3L0e9Ni16Gfp0gRluU5Ou76M8TFU2nk8gQIhSU1hBzV5TRd2vWa0ZXL5q7K_Dz-oUD3BCQ80IUDsOZzJtng33ZUX-iXu5jowA5GdyrMMmhYQOs3bCvzdW-1iVdN7v2xHgpCMweOTD1Wr_8EFjEV3W-0llk806qSyqyV-MbozbDZTxiyNGTSpkNzinBVS1YBWtq8LKitrx57Vfx1l3uUlOORRCFZ3IFPflrmRxM9Hf_0-t_LZsbU3XnuHukd9GEtpZMioG2FB6hLMQNZvap4vDZh3yyaTrn7OKYg-06tnZIoPWCp4JGROJ9dWrTiSDkAoaVFX_apX8QHzppyLQfzPhQ-_IifBOlX0FsXIHeg_7SO2u8ZEwqs6TiB2B5NhIwcUO8zOGe-K_L16CNJyXYDoMhvVE46lfYPMsCBNgBRqAs-N5vuqI5tN7ZtxTRQY2TPEEZv4n-OqgQsQ2hGpmzOs_XkzMPyaCWu81sGPHTqZEC06QvF6OvAKo0cHLL3D2GSFCAijBvkoNk_wkQ-NBpVHMNy1l00Cf9h9hG4Os5p4v9DljOPsnAQ9KnDYjYV9rgUxtjJ7nCcgLVo7AAAQwIE3jnJC2aWQ_hjjDs4L6zkpy2zlbnxJivdPwx1KjOfvF5aUbEUblRomh0PUWtWPRz7PamRZm_cLZAkpqs_l4uCvoV5r2_oyctsZ2QJ4I2peTROtgbDDfAdPVAQYwtGTC23bdjVaxBrIQMHtVtsN0usLHFGrhKSX2z8bYWsZj4gpj3LYqQyKilq1es2VRzuPbLo2ooLXlEmOKtF8-hdjmYlNnz6fjOQfpnHTFBe7p73I_azp_HbGiW26PHwDOiTAzDY32flGYC3hwlDhFWlv9QEe28wdltqtwn0sqMcMMOPN5hTlSWP22v_HHNSd2nFSW1rSESafvvyIb5Gg1ge4rY7s6257NlTCg36o5dYPlSbsN6FMXF9nPP3FGFTKU0xixXbyY0EtPOuR3Hc1Zr1V8xluEW_QHI19nJTXKMic-K8piZo2cxB0qO_usHTGxO9toJlT9Hvu8wLVKu11tK99qM3ZjCNwW9yem67fxv0kVy9_LzRNAcoQa6IXYmsQSXNShb2Dwv5fgM-LkON19-hXMfNlo5Vep-ZJ1fW_BaPFOSN12Ud5yEREds6aBLFeGs-ZXTEw8vjn70gU14YbmqyH117G0w0jBzx5BjjE3v1rSYnq_npQ4lHRXjCgK49vXln_qDBDxJRPBtkGOGEhxvb-QFMWOlOP-VhAxZBcNnmWxwgvIoDiCMJOU28jdcjXkFbyMfaIsdsTSZU90Y94lvUBa-phgLaFFUzfbw6dbr8NhjOhFuaiWlxHuiYW2zONuxYO5ymRErbyalvAor8Q-kVBUcgaHdj65aT_wec3eScWBppModO8lVEOeFCplwtz9eZcILXfIupUkhqkpd5pIqT4W4EJhfTIky0H8Bo3W9JumX34hak29U50J6aptS1kFqLSF6T0AQelch0opP1ShZQhX0=w843-h922?auditContext=prefetch" alt="Logo UAP">
      
      <h2>Iniciar Sesión</h2>
      
      <form id="loginForm">
        <div class="input-field">
          <i class="fas fa-user"></i>
          <input type="text" id="usuario" placeholder="Usuario" autocomplete="username" required>
        </div>
        <div class="input-field">
          <i class="fas fa-lock"></i>
          <input type="password" id="password" placeholder="Contraseña" autocomplete="current-password" required>
          <button type="button" class="toggle-password" id="togglePassword">
            <i class="fas fa-eye"></i>
          </button>
        </div>
        
        <div class="options-container">
          <label class="remember-me">
            <input type="checkbox" id="rememberMe"> Recordar usuario
          </label>
          <a href="#" class="forgot-password" id="forgotPassword">¿Olvidaste tu contraseña?</a>
        </div>
        
        <button type="submit" id="loginButton">Ingresar</button>
      </form>
      
      <div class="divider">o ingresa con credenciales de prueba</div>
      
      <div class="demo-credentials">
        <h3><i class="fas fa-info-circle"></i> Usuarios de demostración</h3>
        <p>Administrador: <span>admin / admin123</span></p>
        <p>Docente: <span>docente / docente123</span></p>
        <p>Estudiante: <span>estudiante / estudiante123</span></p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-text">
      <strong>Sistema UAP</strong> - Plataforma Integral de Gestión Académica<br>
      © 2026 - Administración Campus Las Palmas - Todos los derechos reservados
    </div>
  </footer>

  <script>
    // Estado de la aplicación
    const appState = {
      loginAttempts: 0,
      maxAttempts: 5,
      lockoutTime: 30000, // 30 segundos
      lastAttempt: 0,
      isLocked: false
    };

    // Usuarios de demostración (en un entorno real, esto se haría en el backend)
    const demoUsers = {
      'admin': { password: 'admin123', role: 'Administrador', redirect: 'admin-dashboard.html' },
      'docente': { password: 'docente123', role: 'Docente', redirect: 'teacher-dashboard.html' },
      'estudiante': { password: 'estudiante123', role: 'Estudiante', redirect: 'student-dashboard.html' }
    };

    // DOM Elements
    const loginForm = document.getElementById('loginForm');
    const usuarioInput = document.getElementById('usuario');
    const passwordInput = document.getElementById('password');
    const togglePasswordBtn = document.getElementById('togglePassword');
    const rememberMeCheckbox = document.getElementById('rememberMe');
    const forgotPasswordLink = document.getElementById('forgotPassword');
    const loginButton = document.getElementById('loginButton');

    // Toggle de visibilidad de contraseña
    togglePasswordBtn.addEventListener('click', function() {
      const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInput.setAttribute('type', type);
      this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
    });

    // Recordar usuario
    if (localStorage.getItem('rememberedUser')) {
      usuarioInput.value = localStorage.getItem('rememberedUser');
      rememberMeCheckbox.checked = true;
    }

    rememberMeCheckbox.addEventListener('change', function() {
      if (this.checked) {
        localStorage.setItem('rememberedUser', usuarioInput.value);
      } else {
        localStorage.removeItem('rememberedUser');
      }
    });

    usuarioInput.addEventListener('input', function() {
      if (rememberMeCheckbox.checked) {
        localStorage.setItem('rememberedUser', this.value);
      }
    });

    // Recuperación de contraseña (simulada)
    forgotPasswordLink.addEventListener('click', function(e) {
      e.preventDefault();
      
      Swal.fire({
        title: 'Recuperar contraseña',
        html: `
          <input type="email" id="recoveryEmail" class="swal2-input" placeholder="Ingresa tu correo institucional">
          <small style="display:block; margin-top:8px; color:#6c757d">
            Te enviaremos instrucciones para restablecer tu contraseña
          </small>
        `,
        confirmButtonText: 'Enviar instrucciones',
        confirmButtonColor: '#0077ff',
        preConfirm: () => {
          const email = document.getElementById('recoveryEmail').value;
          if (!email || !email.includes('@')) {
            Swal.showValidationMessage('Por favor ingresa un correo válido');
            return false;
          }
          return { email: email };
        }
      }).then((result) => {
        if (result.isConfirmed) {
          Swal.fire({
            icon: 'success',
            title: '¡Correo enviado!',
            html: `Hemos enviado instrucciones de recuperación a <strong>${result.value.email}</strong><br><br>
                   <small style="color:#6c757d">Revisa tu bandeja de entrada y spam. El enlace expira en 24 horas.</small>`,
            confirmButtonColor: '#0077ff'
          });
        }
      });
    });

    // Manejo del formulario de login
    loginForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Verificar si está bloqueado por intentos fallidos
      if (appState.isLocked) {
        const timeLeft = Math.ceil((appState.lastAttempt + appState.lockoutTime - Date.now()) / 1000);
        Swal.fire({
          icon: 'warning',
          title: 'Demasiados intentos fallidos',
          html: `Por seguridad, tu cuenta está temporalmente bloqueada.<br>Intenta nuevamente en <strong>${timeLeft} segundos</strong>.`,
          confirmButtonColor: '#ff9800'
        });
        return;
      }
      
      const usuario = usuarioInput.value.trim();
      const password = passwordInput.value.trim();
      
      // Validación básica
      if (!usuario || !password) {
        showError('Por favor completa todos los campos');
        return;
      }
      
      // Simular carga
      setButtonLoading(true);
      
      // Simular retraso de red (en producción esto sería una llamada AJAX real)
      setTimeout(() => {
        processLogin(usuario, password);
        setButtonLoading(false);
      }, 1200);
    });

    // Procesar login
    function processLogin(usuario, password) {
      // Verificar si el usuario existe en nuestros usuarios de demostración
      const user = demoUsers[usuario.toLowerCase()];
      
      if (user && user.password === password) {
        // Resetear intentos fallidos
        appState.loginAttempts = 0;
        
        // Simular guardar sesión
        const sessionData = {
          user: usuario,
          role: user.role,
          loginTime: new Date().toISOString(),
          token: btoa(`${usuario}:${Date.now()}`) // Simulación de token
        };
        
        sessionStorage.setItem('userSession', JSON.stringify(sessionData));
        if (rememberMeCheckbox.checked) {
          localStorage.setItem('userSession', JSON.stringify(sessionData));
        }
        
        // Mostrar mensaje de éxito
        showSuccess(`Bienvenido ${user.role}, ${usuario}!`, user.redirect);
      } else {
        // Incrementar contador de intentos fallidos
        appState.loginAttempts++;
        appState.lastAttempt = Date.now();
        
        // Verificar si se alcanzó el límite de intentos
        if (appState.loginAttempts >= appState.maxAttempts) {
          appState.isLocked = true;
          
          // Desbloquear automáticamente después del tiempo de espera
          setTimeout(() => {
            appState.isLocked = false;
            appState.loginAttempts = 0;
          }, appState.lockoutTime);
          
          showError(`Demasiados intentos fallidos. Cuenta bloqueada temporalmente por ${appState.lockoutTime/1000} segundos.`);
        } else {
          const attemptsLeft = appState.maxAttempts - appState.loginAttempts;
          showError(`Usuario o contraseña incorrectos. Te quedan ${attemptsLeft} intento${attemptsLeft > 1 ? 's' : ''}.`);
        }
        
        // Agregar efecto de error a los campos
        usuarioInput.classList.add('input-error');
        passwordInput.classList.add('input-error');
        
        setTimeout(() => {
          usuarioInput.classList.remove('input-error');
          passwordInput.classList.remove('input-error');
        }, 500);
      }
    }

    // Mostrar mensaje de error
    function showError(message) {
      Swal.fire({
        icon: 'error',
        title: 'Error de autenticación',
        html: `<strong>${message}</strong><br><small style="color:#6c757d; margin-top:8px;display:block">Verifica tus credenciales e intenta nuevamente</small>`,
        confirmButtonColor: '#dc3545',
        confirmButtonText: 'Entendido'
      });
    }

    // Mostrar mensaje de éxito y redirigir
    function showSuccess(message, redirectUrl) {
      Swal.fire({
        icon: 'success',
        title: '¡Acceso concedido!',
        html: `<strong>${message}</strong><br><small style="color:#6c757d; margin-top:8px;display:block">Redirigiendo al sistema...</small>`,
        confirmButtonColor: '#0077ff',
        confirmButtonText: 'Continuar',
        timer: 2500,
        timerProgressBar: true,
        showConfirmButton: false,
        willOpen: () => {
          loginButton.classList.add('login-success');
        },
        willClose: () => {
          loginButton.classList.remove('login-success');
          // En un entorno real, redirigiríamos a la URL correspondiente
          // window.location.href = redirectUrl;
          
          // Para esta demo, mostramos una alerta simulando la redirección
          Swal.fire({
            title: 'Sesión iniciada correctamente',
            html: `
              <div style="text-align:left; margin-top:15px; background:#f8f9fa; padding:15px; border-radius:10px">
                <p><strong>Usuario:</strong> ${sessionStorage.getItem('userSession') ? JSON.parse(sessionStorage.getItem('userSession')).user : 'demo'}</p>
                <p><strong>Rol:</strong> ${sessionStorage.getItem('userSession') ? JSON.parse(sessionStorage.getItem('userSession')).role : 'Demo'}</p>
                <p><strong>Acceso:</strong> Concedido</p>
                <p><strong>Sesión:</strong> Activa</p>
              </div>
            `,
            icon: 'success',
            confirmButtonText: 'Aceptar',
            confirmButtonColor: '#28a745'
          }).then(() => {
            // Opcional: limpiar formulario
            loginForm.reset();
          });
        }
      });
    }

    // Establecer estado de carga en el botón
    function setButtonLoading(isLoading) {
      if (isLoading) {
        loginButton.disabled = true;
        loginButton.classList.add('btn-loading');
        loginButton.innerHTML = '<span style="opacity:0">Ingresar</span>';
      } else {
        loginButton.disabled = false;
        loginButton.classList.remove('btn-loading');
        loginButton.innerHTML = 'Ingresar';
      }
    }

    // Protección contra ataques de fuerza bruta al cargar la página
    document.addEventListener('DOMContentLoaded', () => {
      // Verificar si hay un bloqueo activo
      const timeSinceLastAttempt = Date.now() - appState.lastAttempt;
      if (appState.isLocked && timeSinceLastAttempt < appState.lockoutTime) {
        setTimeout(() => {
          appState.isLocked = false;
          appState.loginAttempts = 0;
        }, appState.lockoutTime - timeSinceLastAttempt);
      }
    });
  </script>
</body>
</html>